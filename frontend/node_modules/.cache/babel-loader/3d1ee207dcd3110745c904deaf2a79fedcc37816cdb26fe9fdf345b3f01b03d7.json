{"ast":null,"code":"import{useEffect,useRef}from\"react\";import close from\"../images/close.svg\";import FormValidator from\"../utils/FormValidator\";// Ajuste o caminho conforme necessário\n// Configurações para cada tipo de formulário\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const configUserValidate={inputSelector:\".form__input-name, .form__input-job\",submitButtonSelector:\".form__submit\",inactiveButtonClass:\"form__submit_inactive\",inputErrorClass:\"form__input_type_error\",errorClassVisible:\"form__input-error_visible\"};const configFormValidade={inputSelector:\".formcard__input-title, .formcard__input-link\",submitButtonSelector:\".formcard__submit\",inactiveButtonClass:\"formcard__submit_inactive\",inputErrorClass:\"formcard__input_type_error\",errorClassVisible:\"formcard__input-error_visible\"};const configAvatarValidade={inputSelector:\".popup__avatar-input\",submitButtonSelector:\".popup__avatar-submit\",inactiveButtonClass:\"popup__avatar-submit_inactive\",inputErrorClass:\"popup__avatar-input_type_error\",errorClassVisible:\"popup__avatar-error_visible\"};export default function Popup(_ref){let{name,title,children,isOpen,onClose,onSubmit}=_ref;const formRef=useRef();const validatorRef=useRef();const getConfig=()=>{if(name===\"user\")return configUserValidate;if(name===\"card\")return configFormValidade;if(name===\"avatar\")return configAvatarValidade;return null;};useEffect(()=>{const config=getConfig();if(isOpen&&formRef.current&&config){const initializeValidation=()=>{validatorRef.current=new FormValidator(config,formRef.current);validatorRef.current.enableValidation();validatorRef.current.resetValidation();};if(formRef.current.querySelector(config.submitButtonSelector)){initializeValidation();}else{setTimeout(initializeValidation,0);}}},[isOpen,name]);const handleSubmit=event=>{event.preventDefault();onSubmit(event);};const cssIsOpened=isOpen?\"popup-opened\":\"\";return/*#__PURE__*/_jsxs(\"div\",{className:`popup popup_${name} ${cssIsOpened}`,children:[/*#__PURE__*/_jsx(\"div\",{className:\"overlay\"}),/*#__PURE__*/_jsxs(\"div\",{className:`popup__container ${name===\"small\"?\"popup__container_small\":\"\"}`,children:[/*#__PURE__*/_jsx(\"button\",{className:\"popup__close\",onClick:onClose,children:/*#__PURE__*/_jsx(\"img\",{src:close,alt:\"icone de fechar\",className:\"popup__close-img\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"form__title\",children:title}),/*#__PURE__*/_jsx(\"form\",{className:\"form__fieldset\",noValidate:true,name:name,onSubmit:handleSubmit,ref:formRef,children:children})]})]});}","map":{"version":3,"names":["useEffect","useRef","close","FormValidator","jsx","_jsx","jsxs","_jsxs","configUserValidate","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClassVisible","configFormValidade","configAvatarValidade","Popup","_ref","name","title","children","isOpen","onClose","onSubmit","formRef","validatorRef","getConfig","config","current","initializeValidation","enableValidation","resetValidation","querySelector","setTimeout","handleSubmit","event","preventDefault","cssIsOpened","className","onClick","src","alt","noValidate","ref"],"sources":["/Users/yuriloureiro/Projects/web_project_api_full/frontend/src/components/Popup.jsx"],"sourcesContent":["import { useEffect, useRef } from \"react\";\nimport close from \"../images/close.svg\";\nimport FormValidator from \"../utils/FormValidator\"; // Ajuste o caminho conforme necessário\n\n// Configurações para cada tipo de formulário\nconst configUserValidate = {\n  inputSelector: \".form__input-name, .form__input-job\", \n  submitButtonSelector: \".form__submit\",\n  inactiveButtonClass: \"form__submit_inactive\",\n  inputErrorClass: \"form__input_type_error\",\n  errorClassVisible: \"form__input-error_visible\"\n};\n\nconst configFormValidade = {\n  inputSelector: \".formcard__input-title, .formcard__input-link\", \n  submitButtonSelector: \".formcard__submit\",\n  inactiveButtonClass: \"formcard__submit_inactive\",\n  inputErrorClass: \"formcard__input_type_error\",\n  errorClassVisible: \"formcard__input-error_visible\"\n};\n\nconst configAvatarValidade = {\n  inputSelector: \".popup__avatar-input\",\n  submitButtonSelector: \".popup__avatar-submit\",\n  inactiveButtonClass: \"popup__avatar-submit_inactive\",\n  inputErrorClass: \"popup__avatar-input_type_error\",\n  errorClassVisible: \"popup__avatar-error_visible\"\n};\n\nexport default function Popup({ name, title, children, isOpen, onClose, onSubmit }) {\n  const formRef = useRef();\n  const validatorRef = useRef();\n\n  const getConfig = () => {\n    if (name === \"user\") return configUserValidate;\n    if (name === \"card\") return configFormValidade;\n    if (name === \"avatar\") return configAvatarValidade;\n    return null;\n  };\n\n  useEffect(() => {\n    const config = getConfig();\n    if (isOpen && formRef.current && config) {\n      const initializeValidation = () => {\n        validatorRef.current = new FormValidator(config, formRef.current);\n        validatorRef.current.enableValidation();\n        validatorRef.current.resetValidation();\n      };\n      \n      if (formRef.current.querySelector(config.submitButtonSelector)) {\n        initializeValidation();\n      } else {\n        setTimeout(initializeValidation, 0);\n      }\n    }\n  }, [isOpen, name]);\n  \n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    onSubmit(event);\n  };\n\n  const cssIsOpened = isOpen ? \"popup-opened\" : \"\";\n\n  return (\n    <div className={`popup popup_${name} ${cssIsOpened}`}>\n      <div className=\"overlay\"></div>\n      <div className={`popup__container ${name === \"small\" ? \"popup__container_small\" : \"\"}`}>\n        <button className=\"popup__close\" onClick={onClose}>\n          <img src={close} alt=\"icone de fechar\" className=\"popup__close-img\" />\n        </button>\n        <h2 className=\"form__title\">{title}</h2>\n        <form\n          className=\"form__fieldset\"\n          noValidate\n          name={name}\n          onSubmit={handleSubmit}\n          ref={formRef}\n        >\n          {children}\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,MAAM,KAAQ,OAAO,CACzC,MAAO,CAAAC,KAAK,KAAM,qBAAqB,CACvC,MAAO,CAAAC,aAAa,KAAM,wBAAwB,CAAE;AAEpD;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACA,KAAM,CAAAC,kBAAkB,CAAG,CACzBC,aAAa,CAAE,qCAAqC,CACpDC,oBAAoB,CAAE,eAAe,CACrCC,mBAAmB,CAAE,uBAAuB,CAC5CC,eAAe,CAAE,wBAAwB,CACzCC,iBAAiB,CAAE,2BACrB,CAAC,CAED,KAAM,CAAAC,kBAAkB,CAAG,CACzBL,aAAa,CAAE,+CAA+C,CAC9DC,oBAAoB,CAAE,mBAAmB,CACzCC,mBAAmB,CAAE,2BAA2B,CAChDC,eAAe,CAAE,4BAA4B,CAC7CC,iBAAiB,CAAE,+BACrB,CAAC,CAED,KAAM,CAAAE,oBAAoB,CAAG,CAC3BN,aAAa,CAAE,sBAAsB,CACrCC,oBAAoB,CAAE,uBAAuB,CAC7CC,mBAAmB,CAAE,+BAA+B,CACpDC,eAAe,CAAE,gCAAgC,CACjDC,iBAAiB,CAAE,6BACrB,CAAC,CAED,cAAe,SAAS,CAAAG,KAAKA,CAAAC,IAAA,CAAuD,IAAtD,CAAEC,IAAI,CAAEC,KAAK,CAAEC,QAAQ,CAAEC,MAAM,CAAEC,OAAO,CAAEC,QAAS,CAAC,CAAAN,IAAA,CAChF,KAAM,CAAAO,OAAO,CAAGvB,MAAM,CAAC,CAAC,CACxB,KAAM,CAAAwB,YAAY,CAAGxB,MAAM,CAAC,CAAC,CAE7B,KAAM,CAAAyB,SAAS,CAAGA,CAAA,GAAM,CACtB,GAAIR,IAAI,GAAK,MAAM,CAAE,MAAO,CAAAV,kBAAkB,CAC9C,GAAIU,IAAI,GAAK,MAAM,CAAE,MAAO,CAAAJ,kBAAkB,CAC9C,GAAII,IAAI,GAAK,QAAQ,CAAE,MAAO,CAAAH,oBAAoB,CAClD,MAAO,KAAI,CACb,CAAC,CAEDf,SAAS,CAAC,IAAM,CACd,KAAM,CAAA2B,MAAM,CAAGD,SAAS,CAAC,CAAC,CAC1B,GAAIL,MAAM,EAAIG,OAAO,CAACI,OAAO,EAAID,MAAM,CAAE,CACvC,KAAM,CAAAE,oBAAoB,CAAGA,CAAA,GAAM,CACjCJ,YAAY,CAACG,OAAO,CAAG,GAAI,CAAAzB,aAAa,CAACwB,MAAM,CAAEH,OAAO,CAACI,OAAO,CAAC,CACjEH,YAAY,CAACG,OAAO,CAACE,gBAAgB,CAAC,CAAC,CACvCL,YAAY,CAACG,OAAO,CAACG,eAAe,CAAC,CAAC,CACxC,CAAC,CAED,GAAIP,OAAO,CAACI,OAAO,CAACI,aAAa,CAACL,MAAM,CAACjB,oBAAoB,CAAC,CAAE,CAC9DmB,oBAAoB,CAAC,CAAC,CACxB,CAAC,IAAM,CACLI,UAAU,CAACJ,oBAAoB,CAAE,CAAC,CAAC,CACrC,CACF,CACF,CAAC,CAAE,CAACR,MAAM,CAAEH,IAAI,CAAC,CAAC,CAGlB,KAAM,CAAAgB,YAAY,CAAIC,KAAK,EAAK,CAC9BA,KAAK,CAACC,cAAc,CAAC,CAAC,CACtBb,QAAQ,CAACY,KAAK,CAAC,CACjB,CAAC,CAED,KAAM,CAAAE,WAAW,CAAGhB,MAAM,CAAG,cAAc,CAAG,EAAE,CAEhD,mBACEd,KAAA,QAAK+B,SAAS,CAAE,eAAepB,IAAI,IAAImB,WAAW,EAAG,CAAAjB,QAAA,eACnDf,IAAA,QAAKiC,SAAS,CAAC,SAAS,CAAM,CAAC,cAC/B/B,KAAA,QAAK+B,SAAS,CAAE,oBAAoBpB,IAAI,GAAK,OAAO,CAAG,wBAAwB,CAAG,EAAE,EAAG,CAAAE,QAAA,eACrFf,IAAA,WAAQiC,SAAS,CAAC,cAAc,CAACC,OAAO,CAAEjB,OAAQ,CAAAF,QAAA,cAChDf,IAAA,QAAKmC,GAAG,CAAEtC,KAAM,CAACuC,GAAG,CAAC,iBAAiB,CAACH,SAAS,CAAC,kBAAkB,CAAE,CAAC,CAChE,CAAC,cACTjC,IAAA,OAAIiC,SAAS,CAAC,aAAa,CAAAlB,QAAA,CAAED,KAAK,CAAK,CAAC,cACxCd,IAAA,SACEiC,SAAS,CAAC,gBAAgB,CAC1BI,UAAU,MACVxB,IAAI,CAAEA,IAAK,CACXK,QAAQ,CAAEW,YAAa,CACvBS,GAAG,CAAEnB,OAAQ,CAAAJ,QAAA,CAEZA,QAAQ,CACL,CAAC,EACJ,CAAC,EACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}