{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import{NavLink,useNavigate}from\"react-router-dom\";import InfoTooltip from\"./InfoToolTip\";// Certifique-se de que o caminho está correto\nimport*as auth from\"../utils/auth\";import FormValidator from\"../utils/FormValidator\";// Certifique-se de que este caminho está correto\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=_ref=>{let{handleLogin}=_ref;const[formData,setFormData]=useState({email:\"\",password:\"\"});const[showModal,setShowModal]=useState(false);const[isSuccess,setIsSuccess]=useState(false);const[message,setMessage]=useState(\"\");const navigate=useNavigate();const formRef=useRef(null);// Referência ao formulário\n// Configurações para validação do formulário\nconst configLoginValidate={inputSelector:\".auth__input\",submitButtonSelector:\".auth__button\",inactiveButtonClass:\"auth__button_inactive\",inputErrorClass:\"auth__input_type_error\",errorClassVisible:\"auth__input-error_visible\"};// Atualiza os valores do formulário\nconst handleChange=e=>{const{name,value}=e.target;setFormData({...formData,[name]:value});};// Submete o formulário para autenticação\nconst handleSubmit=e=>{e.preventDefault();const{email,password}=formData;if(!email||!password){setShowModal(true);setIsSuccess(false);setMessage(\"Por favor, preencha todos os campos.\");console.log(\"Campos obrigatórios não preenchidos\");return;}auth.signin(email,password).then(data=>{if(data){handleLogin(email);// Atualiza o estado global de autenticação\nlocalStorage.setItem(\"jwt\",data);// Armazena o token\nnavigate(\"/\");// Redireciona para a página principal\n}}).catch(err=>{console.error(\"Erro no login:\",err);setShowModal(true);setIsSuccess(false);setMessage(\"Ops, algo deu errado. Verifique suas credenciais.\");});};// Habilita validação do formulário\nuseEffect(()=>{if(formRef.current){const validator=new FormValidator(configLoginValidate,formRef.current);validator.enableValidation();}else{console.error(\"formRef.current está indefinido. Verifique o DOM.\");}},[]);// Fecha o modal de mensagem\nconst closeModal=()=>{setShowModal(false);setIsSuccess(false);setMessage(\"\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"login\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"login__title\",children:\"Entrar\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"login__form auth__form\",ref:formRef,children:[/*#__PURE__*/_jsx(\"input\",{name:\"email\",type:\"email\",value:formData.email,onChange:handleChange,placeholder:\"E-mail\",required:true,className:\"login__input auth__input\"}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__error auth__input-error\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"password\",value:formData.password,onChange:handleChange,placeholder:\"Senha\",required:true,minLength:6,className:\"login__input auth__input\"}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__error auth__input-error\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login__button auth__button auth__button_inactive\",disabled:true,children:\"Entrar\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"login__signin\",children:[\"Ainda n\\xE3o \\xE9 membro?\",\" \",/*#__PURE__*/_jsx(NavLink,{to:\"/signup\",className:\"login__link link\",children:\"Inscreva-se aqui!\"})]}),/*#__PURE__*/_jsx(InfoTooltip,{isOpen:showModal,onClose:closeModal,isSuccess:isSuccess,message:message})]});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","useRef","NavLink","useNavigate","InfoTooltip","auth","FormValidator","jsx","_jsx","jsxs","_jsxs","Login","_ref","handleLogin","formData","setFormData","email","password","showModal","setShowModal","isSuccess","setIsSuccess","message","setMessage","navigate","formRef","configLoginValidate","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClassVisible","handleChange","e","name","value","target","handleSubmit","preventDefault","console","log","signin","then","data","localStorage","setItem","catch","err","error","current","validator","enableValidation","closeModal","className","children","onSubmit","ref","type","onChange","placeholder","required","minLength","disabled","to","isOpen","onClose"],"sources":["/Users/yuriloureiro/Projects/web_project_api_full/frontend/src/components/Login.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { NavLink, useNavigate } from \"react-router-dom\";\nimport InfoTooltip from \"./InfoToolTip\"; // Certifique-se de que o caminho está correto\nimport * as auth from \"../utils/auth\";\nimport FormValidator from \"../utils/FormValidator\"; // Certifique-se de que este caminho está correto\n\nconst Login = ({ handleLogin }) => {\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\",\n  });\n  const [showModal, setShowModal] = useState(false);\n  const [isSuccess, setIsSuccess] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  const navigate = useNavigate();\n  const formRef = useRef(null); // Referência ao formulário\n\n  // Configurações para validação do formulário\n  const configLoginValidate = {\n    inputSelector: \".auth__input\",\n    submitButtonSelector: \".auth__button\",\n    inactiveButtonClass: \"auth__button_inactive\",\n    inputErrorClass: \"auth__input_type_error\",\n    errorClassVisible: \"auth__input-error_visible\",\n  };\n\n  // Atualiza os valores do formulário\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({ ...formData, [name]: value });\n  };\n\n  // Submete o formulário para autenticação\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const { email, password } = formData;\n\n    if (!email || !password) {\n      setShowModal(true);\n      setIsSuccess(false);\n      setMessage(\"Por favor, preencha todos os campos.\");\n      console.log(\"Campos obrigatórios não preenchidos\");\n      return;\n    }\n\n\n    auth\n      .signin(email, password)\n      .then((data) => {\n        if (data) {\n          handleLogin(email); // Atualiza o estado global de autenticação\n          localStorage.setItem(\"jwt\", data); // Armazena o token\n          navigate(\"/\"); // Redireciona para a página principal\n        }\n      })\n      .catch((err) => {\n        console.error(\"Erro no login:\", err);\n        setShowModal(true);\n        setIsSuccess(false);\n        setMessage(\"Ops, algo deu errado. Verifique suas credenciais.\");\n      });\n  };\n\n  // Habilita validação do formulário\n  useEffect(() => {\n    if (formRef.current) {\n      const validator = new FormValidator(configLoginValidate, formRef.current);\n      validator.enableValidation();\n    } else {\n      console.error(\"formRef.current está indefinido. Verifique o DOM.\");\n    }\n  }, []);\n\n  // Fecha o modal de mensagem\n  const closeModal = () => {\n    setShowModal(false);\n    setIsSuccess(false);\n    setMessage(\"\");\n  };\n\n  return (\n    <div className=\"login\">\n        <h2 className=\"login__title\">Entrar</h2>\n        <form\n          onSubmit={handleSubmit}\n          className=\"login__form auth__form\"\n          ref={formRef}\n        >\n          <input\n            name=\"email\"\n            type=\"email\"\n            value={formData.email}\n            onChange={handleChange}\n            placeholder=\"E-mail\"\n            required\n            className=\"login__input auth__input\"\n          />\n          <span className=\"popup__error auth__input-error\"></span>\n          <input\n            name=\"password\"\n            type=\"password\"\n            value={formData.password}\n            onChange={handleChange}\n            placeholder=\"Senha\"\n            required\n            minLength={6}\n            className=\"login__input auth__input\"\n          />\n          <span className=\"popup__error auth__input-error\"></span>\n          <button\n            type=\"submit\"\n            className=\"login__button auth__button auth__button_inactive\"\n            disabled\n          >\n            Entrar\n          </button>\n        </form>\n        <p className=\"login__signin\">\n          Ainda não é membro?{\" \"}\n          <NavLink to=\"/signup\" className=\"login__link link\">\n            Inscreva-se aqui!\n          </NavLink>\n        </p>\n\n      <InfoTooltip\n        isOpen={showModal}\n        onClose={closeModal}\n        isSuccess={isSuccess}\n        message={message}\n      />\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}